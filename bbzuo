<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>今天是在一起的第几天（请bb猪在下面输入）</title>
<style>
  :root{
    --violet:#8a5cff; --violet-dark:#6b3dff;
    --bg1:#faf6ff; --bg2:#f6f0ff; --text:#392b57;
    --pink:#ff4d6d; --pink-dark:#ff7aa2;
    --orange:#ff7f50; --purple:#a78bfa;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","Helvetica Neue",Arial,sans-serif;
    color:var(--text);
    background:radial-gradient(1200px 800px at 50% -200px,#ffffff 0%,var(--bg1) 55%,var(--bg2) 100%);
    overflow:hidden;
  }

  /* 背景纸屑层 */
  .confetti-layer{ position:fixed; inset:0; pointer-events:none; z-index:5; overflow:hidden; }
  .confetti{ position:absolute; will-change:transform, opacity; opacity:.95; }
  .c-heart, .c-squiggle, .c-dot{ display:block; }
  @keyframes confettiFall {
    0%   { transform: translate3d(var(--x), -10vh, 0) rotate(0deg) scale(var(--s,1)); opacity:0; }
    10%  { opacity:1; }
    100% { transform: translate3d(var(--x2), 110vh, 0) rotate(360deg) scale(var(--s,1)); opacity:1; }
  }

  .wrap{ width:min(96vw,760px); display:flex; flex-direction:column; align-items:center; gap:18px; position:relative; }
  .hero{
    width:min(72vw, 380px); aspect-ratio:1/1; position:relative; z-index:12;
    filter: drop-shadow(0 18px 40px rgba(124,58,237,.18));
  }

  /* 卡片 */
  .card{
    width:min(94vw, 720px); background:#fff; border-radius:24px;
    box-shadow:0 16px 48px rgba(72,39,133,.14);
    padding:30px 28px 28px; text-align:center; position:relative; z-index:10;
  }
  h1{ margin:0 0 12px; white-space:nowrap; font-size:clamp(16px,3.8vw,24px); }
  .row{ display:flex; gap:12px; margin-top:12px; }
  input[type="number"]{ flex:1; padding:14px 16px; border-radius:14px; border:2px solid #d8ccff; outline:none; font-size:18px; }
  button{
    padding:14px 18px; border:none; border-radius:14px;
    background:linear-gradient(135deg,var(--violet),var(--violet-dark));
    color:#fff; font-size:16px; cursor:pointer;
  }
  .tip{ margin-top:10px; font-size:14px; color:#7a6aa8; min-height:1.2em; visibility:hidden; }
  .tip.show{ visibility:visible; }
  .err{ color:#7c3aed; height:1.2em; margin-top:4px; font-size:14px; }

  /* 爱心雨（持续） */
  #hearts{ position:fixed; inset:0; pointer-events:none; z-index:50; }
  .heart{
    position:absolute; width:22px; height:22px; background: var(--pink);
    transform: rotate(-45deg); border-radius:4px; animation: fall 7s linear forwards;
    filter: drop-shadow(0 4px 10px rgba(255,77,109,.25));
  }
  .heart::before,.heart::after{ content:""; position:absolute; width:22px; height:22px; background: inherit; border-radius:50%; }
  .heart::before{ top:-11px; left:0; } .heart::after{ top:0; left:11px; }
  @keyframes fall{ 0%{ transform: translateY(-12vh) rotate(0deg); opacity:0; }
                   5%{ opacity:.95; } 100%{ transform: translateY(112vh) rotate(360deg); opacity:.95; } }

  /* 提示文字在徽章正上方、靠近但不遮挡 */
  .svg-pop{
    position:absolute; top:-7%; left:50%;
    transform:translateX(-50%) scale(.2);
    z-index:200; width:90vw; max-width:1000px; height:10vh;
    opacity:0; text-align:center;
    animation: svgPopIn 1.2s cubic-bezier(.16,.9,.2,1) forwards;
  }
  @keyframes svgPopIn { 0% { transform: translateX(-50%) scale(.2); opacity:0; }
                        55%{ transform: translateX(-50%) scale(1.12); opacity:1; }
                        100%{ transform: translateX(-50%) scale(1); opacity:1; } }
  .svg-pop.fade-out { animation: svgPopOut .6s ease forwards; }
  @keyframes svgPopOut { to { transform: translateX(-50%) scale(.98); opacity:0; } }
</style>
</head>
<body>
  <!-- 背景纸屑层 -->
  <div class="confetti-layer" id="confetti"></div>

  <div class="wrap" id="wrap">
    <!-- 徽章：在你的基础上加了“礼盒袋”造型（非品牌Logo） -->
    <svg class="hero" viewBox="0 0 420 460" aria-hidden="true">
      <defs>
        <linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%"  stop-color="#ff7aa2"/>
          <stop offset="50%" stop-color="#ff4d6d"/>
          <stop offset="100%" stop-color="#a78bfa"/>
        </linearGradient>
      </defs>

      <!-- 礼盒袋：袋身 + 上沿 -->
      <rect x="90" y="210" rx="22" ry="22" width="240" height="190" fill="none" stroke="url(#g1)" stroke-width="18"/>
      <rect x="80" y="200" rx="14" ry="14" width="260" height="28" fill="url(#g1)" opacity="0.25"/>

      <!-- 提手 -->
      <path d="M110 205 C120 150, 300 150, 310 205" fill="none" stroke="url(#g1)" stroke-width="18" stroke-linecap="round"/>

      <!-- 中心蝴蝶结（十字丝带 + 心形结） -->
      <line x1="210" y1="210" x2="210" y2="400" stroke="url(#g1)" stroke-width="18" stroke-linecap="round"/>
      <line x1="100" y1="305" x2="320" y2="305" stroke="url(#g1)" stroke-width="18" stroke-linecap="round"/>
      <path d="M210 260 c-18 -26 -52 -22 -58 0 c-6 20 13 37 58 60 c45 -23 64 -40 58 -60 c-6 -22 -40 -26 -58 0 Z"
            fill="none" stroke="url(#g1)" stroke-width="18" stroke-linecap="round" stroke-linejoin="round"/>

      <!-- 装饰：袋内的波浪条/小心心 -->
      <g stroke="url(#g1)" stroke-width="14" fill="none" stroke-linecap="round">
        <path d="M130 350 q20 20 0 40" />
        <path d="M165 370 q26 18 0 34" />
        <path d="M255 350 q-20 20 0 40" />
      </g>
      <circle cx="285" cy="375" r="10" fill="url(#g1)"/>
      <circle cx="135" cy="285" r="10" fill="url(#g1)"/>

      <!-- 顶部装饰（呼应你给的图风格） -->
      <path d="M205 120 c-18 -28 -56 -24 -63 0 c-6 21 14 39 63 64 c49 -25 69 -43 63 -64 c-7 -24 -45 -28 -63 0 Z"
            fill="none" stroke="url(#g1)" stroke-width="18"/>
    </svg>

    <!-- 交互卡片 -->
    <div class="card" id="card">
      <h1>今天是在一起的第几天（请bb猪在下面输入）</h1>
      <div class="row">
        <input id="days" type="number" inputmode="numeric" />
        <button id="okBtn">确认</button>
      </div>
      <div class="tip" id="tip">bb猪~四位数哟</div>
      <div class="err" id="err"></div>
    </div>
  </div>

  <!-- 持续爱心雨层 -->
  <div id="hearts"></div>

<script>
(function(){
  const CORRECT = 1000;
  const SUCCESS_MSG1 = "1000天啦！！奖励不带套套内射猪猪！！";
  const SUCCESS_MSG2 = "bb猪我爱你哟！！不带套啦~内射猪猪啦！";
  const ERROR_POP    = "不对哟～再错！就内射猪猪！！";

  const input = document.getElementById('days');
  const btn   = document.getElementById('okBtn');
  const tip   = document.getElementById('tip');
  const wrap  = document.getElementById('wrap');
  const heartsLayer = document.getElementById('hearts');

  /* 背景纸屑：与原逻辑一致 */
  const confettiLayer = document.getElementById('confetti');
  const palette = ['#ff7aa2','#ff4d6d','#ff7f50','#a78bfa','#6b3dff'];
  function spawnConfetti(){
    const el = document.createElement('div');
    el.className='confetti';
    const type = Math.random();
    const color = palette[Math.floor(Math.random()*palette.length)];
    const x = Math.random()*100;
    const x2= x + (Math.random()*20-10);
    const s = 0.6 + Math.random()*1.2;
    const dur = 7 + Math.random()*7;

    el.style.setProperty('--x', x+'vw');
    el.style.setProperty('--x2', x2+'vw');
    el.style.setProperty('--s', s.toFixed(2));
    el.style.animation = 'confettiFall '+dur+'s linear forwards';
    el.style.top = '-8vh';

    if(type < 0.45){
      const svgNS="http://www.w3.org/2000/svg";
      const svg=document.createElementNS(svgNS,'svg');
      svg.setAttribute('class','c-heart'); svg.setAttribute('width',26); svg.setAttribute('height',26); svg.setAttribute('viewBox','0 0 24 24');
      const g=document.createElementNS(svgNS,'g'); g.setAttribute('transform','translate(12,12) rotate(-45)');
      const rect=document.createElementNS(svgNS,'rect'); rect.setAttribute('x','-6'); rect.setAttribute('y','-6'); rect.setAttribute('width','12'); rect.setAttribute('height','12'); rect.setAttribute('rx','3'); rect.setAttribute('fill',color);
      const c1=document.createElementNS(svgNS,'circle'); c1.setAttribute('cx','0'); c1.setAttribute('cy','-6'); c1.setAttribute('r','6'); c1.setAttribute('fill',color);
      const c2=document.createElementNS(svgNS,'circle'); c2.setAttribute('cx','6'); c2.setAttribute('cy','0'); c2.setAttribute('r','6'); c2.setAttribute('fill',color);
      g.appendChild(rect); g.appendChild(c1); g.appendChild(c2); svg.appendChild(g); el.appendChild(svg);
    }else if(type < 0.8){
      const svgNS="http://www.w3.org/2000/svg";
      const svg=document.createElementNS(svgNS,'svg');
      svg.setAttribute('class','c-squiggle'); svg.setAttribute('width',30); svg.setAttribute('height',30); svg.setAttribute('viewBox','0 0 24 24');
      const path=document.createElementNS(svgNS,'path');
      path.setAttribute('d','M2 12 q6 -8 12 0 q6 8 12 0');
      path.setAttribute('fill','none'); path.setAttribute('stroke', color); path.setAttribute('stroke-width','3.2'); path.setAttribute('stroke-linecap','round'); path.setAttribute('stroke-linejoin','round');
      svg.appendChild(path); el.appendChild(svg);
    }else{
      const dot=document.createElement('span');
      dot.className='c-dot'; dot.style.display='block'; dot.style.width = dot.style.height = (6+Math.random()*6)+'px';
      dot.style.background=color; dot.style.borderRadius='50%'; el.appendChild(dot);
    }

    confettiLayer.appendChild(el);
    setTimeout(()=> el.remove(), dur*1000 + 500);
  }

  /* 粉色爱心雨：页面加载即持续 */
  function makeFallingHeart(){
    const h = document.createElement('div');
    h.className = 'heart';
    h.style.left = Math.random()*100 + 'vw';
    h.style.top  = (-10 - Math.random()*15) + 'vh';
    heartsLayer.appendChild(h);
    h.addEventListener('animationend', () => h.remove());
  }
  function startHeartRainForever(){
    for (let i=0;i<16;i++) makeFallingHeart();
    setInterval(makeFallingHeart, 200);
  }

  /* 提示文字：徽章正上方，靠近不遮挡 */
  function textPop(text, mode='pink', hold=1500, permanent=false){
    const div=document.createElement('div');
    div.className='svg-pop';
    div.style.color=(mode==='violet')? '#7c3aed':'#ff4d6d';
    div.style.fontSize='clamp(24px,4.2vw,44px)';
    div.style.fontWeight='900';
    div.textContent=text;
    wrap.appendChild(div);
    if(!permanent){ setTimeout(()=>{ div.classList.add('fade-out'); setTimeout(()=>div.remove(),600); },hold); }
  }

  /* 交互 */
  function success(){
    textPop(SUCCESS_MSG1, "violet", 1200, false);
    setTimeout(()=> textPop(SUCCESS_MSG2, "pink", 2000, true), 1200);
    btn.disabled = true; input.disabled = true; tip.classList.remove('show');
  }
  function fail(){ tip.classList.add('show'); textPop(ERROR_POP, "violet", 1200, false); input.focus(); }
  btn.addEventListener('click', ()=>{ String(input.value||"").trim()===String(CORRECT) ? success() : fail(); });

  /* 页面加载即启动：纸屑 + 爱心雨 */
  setInterval(spawnConfetti, 220);
  for(let i=0;i<22;i++) setTimeout(spawnConfetti, i*80);
  startHeartRainForever();
})();
</script>
</body>
</html>
